# Чек-лист реализации "Хроники Вечной Войны"

Этот документ служит детальным списком задач для отслеживания реализации всех игровых сущностей, описанных в техническом задании (TDD). Используйте его как дополнение к `technical_plan.md` для контроля полноты разработки.

---

### 0. Ядро и Архитектура
*Фундаментальные системы, на которых строится вся игра.*
- [x] **Настройка проекта:** Создана структура папок `src`, `tests` и подпапок. **(Этап 1)**
- [x] **Игровой движок:** Создан `main.py` и базовый класс `Game` с игровым циклом. **(Этап 1)**
- [x] **Базовые классы:** Созданы классы-заглушки для `Unit`, `Army`, `Faction`, `GameWorld`. **(Этап 1)**
- [x] **Базовая система времени:** В класс `Game` добавлены переменные для управления временем (`paused`, `time_multiplier`). **(Этап 1)**
- [x] **Система рендеринга:** Создан класс `Renderer` и интегрирован в `Game`, отделив логику отрисовки. **(Этап 1)**

---

### 1. Ландшафты
*Реализация всех типов местности, влияющих на параметры юнитов и ход боя.*
- [x] **Базовая структура `Tile`:** Создан класс `Tile` со всеми необходимыми полями согласно TDD. **(Этап 2)**
- [ ] **Все подтипы ландшафта:** Реализация всех вариантов местности (леса, горы, города и т.д.). **(Этап 6)**

#### 1.1. Равнины
- [ ] **Зелёное поле:** Стандартная местность без бонусов и штрафов.
- [ ] **Выжженная пустошь:** Снижает видимость и скорость.
- [ ] **Цветущий луг:** Ускоряет восстановление морали.
- [ ] **Каменистая степь:** Даёт небольшой бонус к защите.

#### 1.2. Леса
- [ ] **Хвойный бор:** Защита от стрел, средняя проходимость.
- [ ] **Густой лиственный лес:** Высокая защита, низкая проходимость.
- [ ] **Тёмная чаща:** Идеально для засад, уязвимость к огню.
- [ ] **Редколесье:** Высокая скорость, слабая защита.

#### 1.3. Горы
- [ ] **Пологие холмы:** Бонус к дальности и атаке стрелков.
- [ ] **Крутые скалы:** Высокая защита, почти непроходимы.
- [ ] **Узкое ущелье:** "Бутылочное горлышко" для обороны.
- [ ] **Плато:** Отличный обзор, уязвимость к ветру.

#### 1.4. Водоёмы
- [ ] **Мелкая река:** Замедляет, делает уязвимым при переправе.
- [ ] **Глубокое озеро:** Непроходимый барьер.
- [ ] **Топкое болото:** Сильно замедляет, снижает мораль.
- [ ] **Песчаный брод:** Относительно безопасная переправа.

#### 1.5. Городские территории
- [ ] **Деревня:** Источник ресурсов и рекрутов.
- [ ] **Укреплённый город:** Центр снабжения с высокой защитой.
- [ ] **Замок:** Максимальная защита, требует больших ресурсов на осаду.
- [ ] **Разрушенные руины:** Бонус к засадам.

#### 1.6. Военные постройки
- [ ] **Лагерь:** Позволяет восстанавливать силы и защиту.
- [ ] **Стоянка:** Быстрый отдых, но слабая защита.

---

### 2. Юниты
*Создание всех боевых и небоевых единиц с уникальными характеристиками.*

#### 2.1. Пехота
*Основа любой армии. **(Этап 6)***
- [ ] **Копейщики:** Эффективны против кавалерии.
- [ ] **Мечники:** Сбалансированные бойцы.
- [ ] **Щитоносцы:** "Танки" с высокой защитой.
- [ ] **Алебардщики:** Эффективны против брони.

#### 2.2. Кавалерия
*Быстрые отряды для фланговых ударов и разведки. **(Этап 6)***
- [ ] **Лёгкая кавалерия:** Разведка и преследование.
- [ ] **Тяжёлая кавалерия:** Мощный натиск.
- [ ] **Конные лучники:** Мобильные стрелки.
- [ ] **Рыцари-копейщики:** Сокрушительная атака с разбега.

#### 2.3. Стрелки
*Юниты дальнего боя. **(Этап 6)***
- [ ] **Лучники:** Классические стрелки.
- [ ] **Арбалетчики:** Медленные, но пробивают броню.
- [ ] **Пращники:** Дешёвые и мобильные, но слабые.
- [ ] **Метатели дротиков:** Эффективны против легкобронированных целей.

#### 2.4. Осадные машины
*Техника для разрушения укреплений. **(Этап 12)***
- [ ] **Катапульта:** Бьёт по площади, разрушает стены.
- [ ] **Таран:** Эффективен против ворот.
- [ ] **Баллиста:** Точные выстрелы по юнитам и укреплениям.
- [ ] **Огненный требушет:** Поджигает большие области.

#### 2.5. Обозы
*Поддержка армии. **(Этап 11)***
- [ ] **Обоз:** Юнит, перевозящий припасы (еду, боезапасы, медикаменты).

#### 2.6. Специальные отряды
*Юниты с уникальными небоевыми способностями. **(Этап 12)***
- [ ] **Разведчик:** Обнаружение скрытых юнитов и засад.
- [ ] **Инженер:** Строительство временных укреплений.
- [ ] **Жрец:** Повышение морали.
- [ ] **Шпион:** Саботаж и сбор информации.
- [ ] **Телохранитель:** Защита генерала или героя.
- [ ] **Убийца:** Попытка устранения вражеского лидера.
- [ ] **Диверсант:** Уничтожение припасов и осадных машин.
- [ ] **Герой / Легендарная личность:** Уникальный юнит с особыми перками.

---

### 3. Игровые механики и системы

#### 3.1. Ядро ИИ-генерала
*Создание "мозга" для NPC-командиров.*
- [x] **Нематериальность генерала:** Четкое разделение `GeneralAI` как нематериального "мозга" от физических юнитов. **(Этап 5)**
- [x] **Внешние профили ИИ:** Личность, знания и тактики генералов загружаются из внешних JSON-файлов. **(Этап 5)**
- [ ] **Уникальные черты характера:** Реализация системы качественных черт (`"Храбрец"`, `"Трус"`), влияющих на решения. **(Этап 8)**
- [ ] **Система отношений:** ИИ-генералы могут формировать личные отношения (`"ненависть"`, `"соперничество"`) друг с другом. **(Этап 12)**
- [x] **Базовая логика принятия решений:** Простейшие команды: атаковать ближайшего врага на основе параметров из профиля. **(Этап 5)**
- [x] **База знаний (`knowledge_base`):** Система, где ИИ хранит факты о мире, полученные от игрока или разведки. **(Этап 5 - загрузка, Этап 8 - использование)**
- [ ] **Система обучения:** Механизм, позволяющий ИИ менять свою тактику и параметры в профиле на основе прошлых успехов и поражений. **(Этап 8)**
- [ ] **Событийная память:** ИИ помнит, кто его победил и при каких обстоятельствах, формируя "обиды". **(Этап 8)**
- [ ] **Система амбиций и целей:** Реализация долгосрочных стратегических целей для ИИ. **(Этап 12)**
- [ ] **Система лояльности и предательства:** Динамический параметр лояльности, который может привести к дезертирству. **(Этап 12)**
- [ ] **Система "обиды на игрока":** Возможность для ИИ начать игнорировать советы игрока. **(Этап 10)**
- [ ] **Система "наследия":** Возможность для генералов оставлять после себя бонусы для своих преемников. **(Этап 13)**
- [ ] **Иерархия командования:** Реализация логики, при которой решения о найме принимает генерал, а отряды могут выполнять транспортные функции. **(Этап 9)**

#### 3.2. Карта и Мир
- [x] **Процедурная генерация карты:** Создана функция для генерации мира из объектов Tile (пока только вода/земля). **(Этап 2)**
- [x] **Визуализация карты:** Отрисовка тайлов на экране. **(Этап 2)**
- [x] **Камера:** Реализация смещения и масштабирования вида. **(Этап 2)**
- [ ] **Регионы и владение:** Реализация механики разделения карты на регионы, принадлежащие фракциям. **(Этап 6)**
- [x] **Рендеринг армий:** Отображение армий на карте в виде цветных кругов. **(Этап 3)**
- [x] **Управление армиями:** Выбор армии (ЛКМ) и отдача приказа на перемещение (ПКМ). **(Этап 3)**
- [x] **Движение армий:** Армии плавно перемещаются к указанной цели. **(Этап 3)**
- [ ] **Механика засад:** Возможность для отрядов прятаться в лесах или руинах и наносить внезапный удар. **(Этап 12)**
- [ ] **Система действий на карте (`WorldActionSystem`):** Реализация системы для управления длительными, прерываемыми действиями (строительство, саботаж). **(Этап 12)**

#### 3.3. Боевая система
*Правила, по которым происходят сражения.*
- [x] **Базовый расчёт боя:** Простое сравнение суммарной атаки и защиты армий. **(Этап 4)**
- [x] **Расчёт боя на основе юнитов:** Реализован пошаговый бой (`Combat` class), учитывающий характеристики и здоровье каждого юнита в армии. **(Этап 4, выполнено с опережением)**
- [ ] **Учёт влияния ландшафта:** Бонусы и штрафы к параметрам в зависимости от клетки, где находится юнит. **(Этап 6)**
- [ ] **Учёт влияния погоды и времени суток:** Дождь ослабляет стрелков, ночь снижает видимость и т.д. **(Этап 10)**
- [ ] **Механика осад:** Взаимодействие осадных машин с городскими укреплениями. **(Этап 12)**

#### 3.4. Снабжение и логистика
*Экономический слой игры, управление ресурсами армии.*
- [ ] **Базовое производство (очки):** Города генерируют абстрактные "очки производства". **(Этап 7)**
- [ ] **Стоимость юнитов:** Назначение разной стоимости найма для разных типов юнитов. **(Этап 7)**
- [ ] **Логика пополнения для ИИ:** Реализация у ИИ способности отступать в город для восстановления потерь юнитов. **(Этап 7)**
- [ ] **Расход еды и боезапасов:** Армии тратят ресурсы в походе и в бою. **(Этап 11)**
- [ ] **Пополнение запасов:** Возможность пополнять ресурсы в городах или с помощью обозов. **(Этап 11)**
- [ ] **Механика истощения:** Армии без еды начинают нести небоевые потери. **(Этап 11)**
- [ ] **Продвинутое производство (ресурсы):** Города производят конкретные ресурсы (еда, железо и т.д.). **(Этап 11)**
- [ ] **Специализация поселений:** Реализация разных типов городов/деревень/форпостов с разным производством. **(Этап 11)**
- [ ] **UI для допроса генералов:** Окно, где можно запросить у ИИ отчёт о его планах и действиях. **(Этап 10)**
- [ ] **Отладочный UI для NLP:** Создание технического интерфейса для отладки и визуализации работы NLP-модуля. **(Этап 10)**

#### 3.5. Мораль и события
*Динамические элементы, влияющие на ход войны. **(Этап 12)***
- [ ] **Система морали:** Боевой дух армии, влияющий на её эффективность в бою.
- [ ] **Механика дезертирства:** При очень низкой морали юниты могут покинуть армию.
- [ ] **Система случайных событий:** Неожиданные происшествия (бунты, болезни, находки), влияющие на игру.

#### 3.6. Взаимодействие с игроком
*Способы, которыми игрок влияет на мир.*
- [ ] **Управление временем:** Возможность ставить игру на паузу или ускорять время. **(Этап 1 - база, Этап 13 - UI)**
- [ ] **Влияние на погоду:** Способность игрока вызвать дождь, туман и т.д. **(Этап 10)**
- [ ] **Вызов глобальных катастроф:** Мощные воздействия вроде чумы или засухи. **(Этап 10)**
- [ ] **NLP-модуль:** Система распознавания текста, чтобы ИИ понимал приказы игрока в свободной форме. **(Этап 10)**

---

### 4. Интерфейс (UI)
*Все видимые для игрока элементы управления и информации.*

- [ ] **Главное меню:** Начальный экран с выбором опций. **(Этап 13)**
- [ ] **Экран настроек:** Управление графикой, звуком, игровым процессом. **(Этап 13)**
- [ ] **Система сохранения и загрузки игры:** Функционал для сохранения и возобновления прогресса. **(Этап 13)**
- [ ] **Игровой HUD:** Основные элементы на экране во время игры (карта, календарь, часы). **(Этап 13)**
- [ ] **Журнал событий и логов:** Окно для просмотра истории всех происшествий. **(Этап 13)**
- [ ] **Окно докладов от генералов:** Интерфейс для чтения отчётов от ИИ. **(Этап 10 - база, Этап 13 - полировка)**
- [ ] **Каталог генералов:** Энциклопедия всех действующих и павших генералов, их истории и достижений. **(Этап 13)**
- [ ] **Внутриигровой справочник:** Энциклопедия по всем юнитам, ландшафтам и механикам. **(Этап 13)**
- [ ] **Интерфейс для взаимодействия с NLP-модулем:** Текстовое поле для ввода команд. **(Этап 10)**
- [ ] **Визуальная обратная связь:** Отображение того, как именно ИИ-генерал понял текстовую команду игрока. **(Этап 10)**

---

### 5. Мета-игра и контент
*Системы, обеспечивающие реиграбельность и расширяемость. **(Этап 14)***

- [ ] **Система сценариев:** Возможность начинать игру с заранее определёнными условиями (например, историческая битва).
- [ ] **Система достижений для генералов:** Награды для ИИ за особые успехи, влияющие на их наследие.
- [ ] **Уникальные мировые локации:** Создание особых тайлов с глобальными бонусами. **(Этап 14)**
- [ ] **Поддержка модов:** Возможность для игроков добавлять свой контент (юнитов, ландшафты) через внешние файлы.
- [ ] **UI для управления модами:** Меню для включения и отключения пользовательских модификаций. 